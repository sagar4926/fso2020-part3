{"version":3,"sources":["Filter.js","Person.js","Persons.js","PersonForm.js","apis/api__persons.js","components/notification/Notification.js","App.js","index.js"],"names":["Filter","filter","onChange","value","Person","person","onRemove","name","number","onClick","Persons","persons","filteredPersons","length","toLowerCase","includes","map","key","PersonForm","onPersonCreated","useState","newName","setNewName","newNumber","setNewNumber","useEffect","onSubmit","event","preventDefault","target","type","PERSONS_URL","axios","get","then","res","data","payload","post","id","delete","put","Notification","notification","className","message","App","setPersons","newPerson","setNewPerson","setFilter","undefined","setNotification","api__persons","_showNotification","setTimeout","showErrorNotification","showSuccessNotification","removePersonFromState","p","created","existing","window","confirm","catch","error","response","status","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.8f6749de.chunk.js","sourcesContent":["import React from \"react\";\n\nconst Filter = ({ filter, onChange }) => {\n  return (\n    <div>\n      filter shown with <input value={filter} onChange={onChange} />\n    </div>\n  );\n};\n\nexport default Filter;\n","import React from \"react\";\n\nconst Person = ({ person, onRemove }) => {\n  return (\n    <li>\n      {person.name} | {person.number}{\" \"}\n      <button onClick={() => onRemove(person)}>Delete</button>\n    </li>\n  );\n};\n\nexport default Person;\n","import React from \"react\";\nimport Person from \"./Person\";\n\nconst Persons = ({ persons, filter, onRemove }) => {\n  const personFilter = (person) =>\n    person.name.toLowerCase().includes(filter.toLowerCase());\n\n  const filteredPersons =\n    filter && filter.length > 0 ? persons.filter(personFilter) : persons;\n\n  return (\n    <ul>\n      {filteredPersons.map((person) => (\n        <Person key={person.name} person={person} onRemove={onRemove}></Person>\n      ))}\n    </ul>\n  );\n};\n\nexport default Persons;\n","import React, { useState, useEffect } from \"react\";\n\nconst PersonForm = ({ onPersonCreated, person }) => {\n  const [newName, setNewName] = useState(person.name);\n  const [newNumber, setNewNumber] = useState(person.number);\n\n  useEffect(() => {\n    setNewName(person.name);\n    setNewNumber(person.number);\n  }, [person]);\n\n  const addNewPerson = (event) => {\n    event.preventDefault();\n    onPersonCreated({ name: newName, number: newNumber });\n  };\n\n  const nameChanged = (event) => {\n    setNewName(event.target.value);\n  };\n\n  const numberChanged = (event) => {\n    setNewNumber(event.target.value);\n  };\n\n  return (\n    <form onSubmit={addNewPerson}>\n      <div>\n        name: <input value={newName} onChange={nameChanged} />\n      </div>\n      <div>\n        number: <input value={newNumber} onChange={numberChanged} />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  );\n};\n\nexport default PersonForm;\n","import axios from \"axios\";\n\nconst BASE_URL = '/api';\nconst PERSONS_URL = `${BASE_URL}/persons`;\n\nconst getAll = () => {\n  return axios.get(PERSONS_URL).then((res) => res.data);\n};\n\nconst create = (payload) => {\n  return axios.post(PERSONS_URL, payload).then((res) => res.data);\n};\n\nconst update = (payload) => {\n  return axios\n    .put(`${PERSONS_URL}/${payload.id}`, payload)\n    .then((res) => res.data);\n};\n\nconst remove = (id) => {\n  return axios.delete(`${PERSONS_URL}/${id}`);\n};\n\nexport default { getAll, create, delete: remove, update };\n","import React from \"react\";\nimport \"./Notification.css\";\n\nconst Notification = ({ notification }) => {\n  if (!notification) {\n    return null;\n  }\n\n  return <div className={`notification ${notification.type}`}>{notification.message}</div>;\n};\n\nexport default Notification;\n","import React, { useState, useEffect } from \"react\";\nimport Filter from \"./Filter\";\nimport Persons from \"./Persons\";\nimport PersonForm from \"./PersonForm\";\nimport api__persons from \"./apis/api__persons\";\nimport Notification from \"./components/notification/Notification\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newPerson, setNewPerson] = useState({ name: \"\", number: \"\" });\n  const [filter, setFilter] = useState(\"\");\n  const [notification, setNotification] = useState(undefined);\n\n  useEffect(() => {\n    api__persons.getAll().then((data) => setPersons(data));\n  }, []);\n\n  const filterChanged = (event) => {\n    setFilter(event.target.value);\n  };\n\n  const _showNotification = (message, type) => {\n    setNotification({ message, type });\n    setTimeout(() => setNotification(undefined), 5000);\n  };\n  const showErrorNotification = (message) => {\n    _showNotification(message, \"error\");\n  };\n\n  const showSuccessNotification = (message) => {\n    _showNotification(message, \"success\");\n  };\n\n  const onPersonCreated = (created) => {\n    const existing = persons.filter((person) => person.name === created.name);\n\n    if (existing.length > 0) {\n      const shouldUpdate = window.confirm(\n        `${created.name} is already added to the phonebook. do you want to replace the phone number?`\n      );\n      if (shouldUpdate) {\n        const payload = { ...existing[0], number: created.number };\n        api__persons\n          .update(payload)\n          .then((data) => {\n            setPersons(persons.map((p) => (p.id === payload.id ? payload : p)));\n            showSuccessNotification(`${payload.name}'s phone number updated.`);\n          })\n          .catch((error) => {\n            if (error.response.status === 404) {\n              showErrorNotification(\n                `Looks like ${payload.name} was deleted elsewhere!`\n              );\n              removePersonFromState(payload);\n            } else {\n              showErrorNotification(\n                `An error occured while updating ${payload.name}`\n              );\n            }\n          });\n      }\n      return;\n    }\n\n    api__persons\n      .create(created)\n      .then((data) => {\n        setPersons(persons.concat(data));\n        setNewPerson({ name: \"\", number: \"\" });\n        showSuccessNotification(`${data.name} added.`);\n      })\n      .catch((error) => {\n        showErrorNotification(error.response.data.message)\n      });\n  };\n\n  const removePersonFromState = (person) => {\n    setPersons(persons.filter((p) => p.id !== person.id));\n  };\n\n  const onRemove = (person) => {\n    const shouldDelete = window.confirm(`Should ${person.name} be deleted?`);\n    if (shouldDelete) {\n      api__persons\n        .delete(person.id)\n        .then((res) => {\n          removePersonFromState(person);\n          showSuccessNotification(`${person.name} deleted.`);\n        })\n        .catch((error) => {\n          if (error.response.status === 404) {\n            showErrorNotification(\n              `Looks like ${person.name} was deleted elsewhere!`\n            );\n            removePersonFromState(person);\n          } else {\n            showErrorNotification(\n              `An error occured while deleting ${person.name}`\n            );\n          }\n        });\n    }\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Filter filter={filter} onChange={filterChanged}></Filter>\n      <PersonForm\n        person={newPerson}\n        onPersonCreated={onPersonCreated}\n      ></PersonForm>\n      <Notification notification={notification}></Notification>\n      <h2>Numbers</h2>\n      <Persons persons={persons} filter={filter} onRemove={onRemove}></Persons>\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}