(this.webpackJsonpthe_phonebook=this.webpackJsonpthe_phonebook||[]).push([[0],{15:function(e,n,t){e.exports=t(39)},37:function(e,n,t){},38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),r=t(13),c=t.n(r),u=t(14),i=t(2),l=function(e){var n=e.filter,t=e.onChange;return o.a.createElement("div",null,"filter shown with ",o.a.createElement("input",{value:n,onChange:t}))},m=function(e){var n=e.person,t=e.onRemove;return o.a.createElement("li",null,n.name," | ",n.number," ",o.a.createElement("button",{onClick:function(){return t(n)}},"Delete"))},f=function(e){var n=e.persons,t=e.filter,a=e.onRemove,r=t&&t.length>0?n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})):n;return o.a.createElement("ul",null,r.map((function(e){return o.a.createElement(m,{key:e.name,person:e,onRemove:a})})))},s=function(e){var n=e.onPersonCreated,t=e.person,r=Object(a.useState)(t.name),c=Object(i.a)(r,2),u=c[0],l=c[1],m=Object(a.useState)(t.number),f=Object(i.a)(m,2),s=f[0],d=f[1];Object(a.useEffect)((function(){l(t.name),d(t.number)}),[t]);return o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),n({name:u,number:s})}},o.a.createElement("div",null,"name: ",o.a.createElement("input",{value:u,onChange:function(e){l(e.target.value)}})),o.a.createElement("div",null,"number: ",o.a.createElement("input",{value:s,onChange:function(e){d(e.target.value)}})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"add")))},d=t(3),b=t.n(d),h="".concat("/api","/persons"),p=function(){return b.a.get(h).then((function(e){return e.data}))},v=function(e){return b.a.post(h,e).then((function(e){return e.data}))},E=function(e){return b.a.delete("".concat(h,"/").concat(e))},w=function(e){return b.a.put("".concat(h,"/").concat(e.id),e).then((function(e){return e.data}))},g=(t(37),function(e){var n=e.notification;return n?o.a.createElement("div",{className:"notification ".concat(n.type)},n.message):null}),j=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],r=n[1],c=Object(a.useState)({name:"",number:""}),m=Object(i.a)(c,2),d=m[0],b=m[1],h=Object(a.useState)(""),j=Object(i.a)(h,2),O=j[0],k=j[1],C=Object(a.useState)(void 0),S=Object(i.a)(C,2),y=S[0],L=S[1];Object(a.useEffect)((function(){p().then((function(e){return r(e)}))}),[]);var R=function(e,n){L({message:e,type:n}),setTimeout((function(){return L(void 0)}),5e3)},P=function(e){R(e,"error")},A=function(e){R(e,"success")},D=function(e){r(t.filter((function(n){return n.id!==e.id})))};return o.a.createElement("div",null,o.a.createElement("h2",null,"Phonebook"),o.a.createElement(l,{filter:O,onChange:function(e){k(e.target.value)}}),o.a.createElement(s,{person:d,onPersonCreated:function(e){var n=t.filter((function(n){return n.name===e.name}));if(n.length>0){if(window.confirm("".concat(e.name," is already added to the phonebook. do you want to replace the phone number?"))){var a=Object(u.a)({},n[0],{number:e.number});w(a).then((function(e){r(t.map((function(e){return e.id===a.id?a:e}))),A("".concat(a.name,"'s phone number updated."))})).catch((function(e){404===e.response.status?(P("Looks like ".concat(a.name," was deleted elsewhere!")),D(a)):P("An error occured while updating ".concat(a.name))}))}}else v(e).then((function(e){r(t.concat(e)),b({name:"",number:""}),A("".concat(e.name," added."))}))}}),o.a.createElement(g,{notification:y}),o.a.createElement("h2",null,"Numbers"),o.a.createElement(f,{persons:t,filter:O,onRemove:function(e){window.confirm("Should ".concat(e.name," be deleted?"))&&E(e.id).then((function(n){D(e),A("".concat(e.name," deleted."))})).catch((function(n){404===n.response.status?(P("Looks like ".concat(e.name," was deleted elsewhere!")),D(e)):P("An error occured while deleting ".concat(e.name))}))}}))};t(38);c.a.render(o.a.createElement(j,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.809059b0.chunk.js.map